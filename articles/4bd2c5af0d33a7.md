---
title: "ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

## ã¯ã˜ã‚ã«
ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã—ã¦ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚‹ã®ã«ã‚ãŸã£ã¦ã€ã„ã‚ã‚†ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã‚ºãƒ©ã‚ºãƒ©ã¨é•·ã„å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã“ã¨ã¯ã§ãã¾ã™ã€‚
ã—ã‹ã—ç‰¹ã«ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã„ã¦ã¯ã€å…±é€šåŒ–ã§ãã‚‹ã¨ã“ã‚ã¨ã„ã†ã‚‚ã®ãŒå‡ºã¦ãã¾ã™ã€‚ã‚‚ã—å…±é€šåŒ–ã™ã¹ãæ‰€ã‚’å…±é€šåŒ–ã§ãã¦ã„ãªã„ã¨ã€ãã®éƒ¨åˆ†ã®ä»•æ§˜å¤‰æ›´ãŒèµ·ããŸæ™‚ã«ã€å¤‰æ›´æ¼ã‚ŒãŒèµ·ããŸã‚Šã—ã¾ã™ã€‚
ã¾ãŸå…±é€šåŒ–ã—ã¦åˆ‡ã‚Šåˆ†ã‘ãŸå‡¦ç†ãŒã€ã©ã“ã‹ã‚‰ä¾å­˜ã•ã‚Œã¦ã„ã¦ã©ã“ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹ãŒè¤‡é›‘ãªçŠ¶æ³ã«ãªã‚‹ã¨ã€Aã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’å¤‰æ›´ã—ãŸã›ã„ã§Bã¨ã„ã†ã‚¯ãƒ©ã‚¹ãŒäºˆæœŸã›ãšå£Šã‚ŒãŸã€ã¨ã„ã†ã“ã¨ã«ã‚‚ãªã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã¨ã„ã†ã®ã¯ã€

- ã©ã“ã‚’ã©ã†ã„ã†åŸºæº–ã§å…±é€šåŒ–ã™ã‚‹ã‹
- ãã®å…±é€šåŒ–ã—ãŸéƒ¨åˆ†ã®ä¾å­˜é–¢ä¿‚ã‚’ã©ã†ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã‹
- ç–çµåˆã‚’ä¿ã¤ã«ã¯

ã¨ã„ã†ã“ã¨ã‚’è€ƒæ…®ã—ã¦å‡¦ç†ã‚’åˆ†å‰²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—ãã‚Œã ã‘è¨€ã‚ã‚Œã¦ã‚‚å®Ÿéš›ã«ãã‚Œã§æ­£ã—ãå‡¦ç†ã‚’åˆ†å‰²ã™ã‚‹ã®ã¯ã¨ã¦ã‚‚é›£ã—ã„ã“ã¨ã§ã™ã€‚
ãã“ã§ãã®åˆ†å‰²ã™ã‚‹æŒ‡é‡ã‚’ä¸ãˆã¦ãã‚Œã‚‹ã®ãŒã€ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã®æˆ¦è¡“é¢ã®å¤§ããªãƒ¡ãƒªãƒƒãƒˆã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã¯ã“ã®2ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã†ã‚¯ãƒ©ã‚¹åŒ–ã™ã‚‹ã®ã‹ã¨ã„ã†ã“ã¨ã‚’ä¾‹ã«ã—ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚

users
|id|name|email|phone_number|
|---|---|---|---|
|1|user1|user1@mail.com|090-0000-1111|
|2|user2|user2@mail.com|090-0000-2222|
|3|user3|user3@mail.com|090-0000-3333|

orders
|id|chain|amount|user_id|
|---|---|---|---|
|1|eth mainnet|10000|1|
|2|polygon|20000|1|
|3|astar|10000|2|

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ç²’åº¦ã«ã‚ˆã£ã¦ä»¥ä¸‹ã®å˜ä½ã«åˆ‡ã‚Šåˆ†ã‘ã¾ã™ã€‚
- Value Objectï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
- Entityï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
- Aggregateï¼ˆé›†ç´„ï¼‰

ã¾ãŸãƒ­ã‚¸ãƒƒã‚¯ã®é–¢æ•°ã‚’æ›¸ãå ´æ‰€ã¨ã—ã¦ä»¥ä¸‹ã®2ã¤ãŒã‚ã‚Šã¾ã™ã€‚
- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆå˜ã«ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚‚è¨€ã†ï¼‰
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã‚‚è¨€ã†ï¼‰

æœ€å¾Œã«ã€å¤–éƒ¨ã¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹å ´æ‰€ã§ã™
- ãƒªãƒã‚¸ãƒˆãƒª

## å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¾‹
å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€DBã§è¨€ã†1ã¤ã®ã‚«ãƒ©ãƒ ã®ä»•æ§˜ã‚’ã‚¯ãƒ©ã‚¹ã«ã—ãŸã‚‚ã®ã§ã™ã€‚ã“ã®ä¾‹ã§ã„ã†ã¨ã€nameã€emailã€phone_numberã€chainã€amountâ€¦ãªã©ã«å½“ãŸã‚Šã¾ã™ã€‚
å®Œå…¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½¿ã„ã€ä¸æ­£ãªå€¤ãŒå­˜åœ¨ã—ãˆãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
å˜ãªã‚‹stringå‹ã€numberå‹ã€booleanå‹ãªã©ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ã¯è¡¨ç¾ã§ããªã„ã‚«ãƒ©ãƒ ã«å¯¾ã™ã‚‹ä»•æ§˜ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼‰ã‚’è¡¨ç¾ã—ã¾ã™ã€‚
ä¾‹ãˆã°ã“ã®ä¾‹ã§ã¯ã€æ°åã¯ç©ºæ–‡å­—ã‚’è¨±å¯ã—ãªã„ã¨ã„ã†ä»•æ§˜ãŒè¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚


```ts
class UserName{
  value:string

  constructor(value:string){
    if(value.len === 0){
      throw new Error('UserName is not allow empty')
    }
    this.value = value
  }

  get():string{
    return this.value
  }
}
```

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä¾‹
ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯DBã§è¨€ã†è¡Œãƒ‡ãƒ¼ã‚¿ã«å½“ãŸã‚‹ã‚‚ã®ã§ã™ã€‚è¡Œãƒ‡ãƒ¼ã‚¿ã«å«ã¾ã‚Œã‚‹å„ã‚«ãƒ©ãƒ ã‚’å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æŒã¡ã€è¡Œãƒ‡ãƒ¼ã‚¿å†…ã®æ¯”è¼ƒã§ç”Ÿã¾ã‚Œã‚‹ä»•æ§˜ã‚’ãƒ­ã‚¸ãƒƒã‚¯ã¨ã—ã¦å«ã¿ã¾ã™ã€‚
ä¾‹ãˆã°Todoã‚¢ãƒ—ãƒªã®ã€é–‹å§‹æ—¥ã¨çµ‚äº†æ—¥ãŒã‚ã‚‹æ™‚ã«ã€çµ‚äº†æ—¥ã¯å¿…ãšé–‹å§‹æ—¥ã‚ˆã‚Šå¾Œã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã„ã£ãŸã“ã¨ã§ã™ã€‚
ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ã—ã¦æ³¨æ„ã™ã‚‹ã“ã¨ã¯ã€ã“ã‚Œã¯DBã®è¡Œãƒ‡ãƒ¼ã‚¿ã¨å¿…ãšåŒã˜å½¢ã«ãªã‚‹ã‚ã‘ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®å½¢ã¯æ­£è¦åŒ–ã•ã‚ŒãŸå½¢ã§ã‚ã‚Šã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯RDBã®ä»•æ§˜ã«å·¦å³ã•ã‚Œãšç´”ç²‹ã«ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒå¯¾è±¡ã¨ã™ã‚‹è¡Œãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¾ã—ã¾ã™ã€‚DBã‹ã‚‰è¦‹ã‚‹ã¨JOINã•ã‚ŒãŸå¾Œã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®å½¢ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚


```ts
class User{
  private id:UserId
  private name:UserName
  private email:Email
  private phoneNuber:PhoneNuber

  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã§å—ã‘å–ã£ãŸå€¤ã‹ã‚‰åˆæœŸåŒ–ã™ã‚‹æ™‚
  static init(
    name:UserName,
    email:Email,
    phoneNuber:PhoneNuber
  ){
    this.id = new UserId() // IDã‚’æ–°è¦ä½œæˆ
    this.name = name
    this.email = email
    this.phoneNuber = phoneNuber
  }

  // DBã‹ã‚‰å–ã‚Šå‡ºã—ãŸå€¤ã‹ã‚‰åˆæœŸåŒ–ã™ã‚‹æ™‚
  static initByDb(
    id:UserId,
    name:UserName,
    email:Email,
    phoneNuber:PhoneNuber
  ){
    this.id = id
    this.name = name
    this.email = email
    this.phoneNuber = phoneNuber
  }

  // getter
  id():UserId{
    return this.id
  }

  name():UserName{
    return this.name
  }

  email():Email{
    return this.email
  }

  phoneNuber():PhoneNumber{
    return this.phoneNuber
  }
}
```

## é›†ç´„ã®ä¾‹
é›†ç´„ã¯ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®æ•´åˆæ€§ã‚’ä¿ã¤ç¯„å›²ã€ã¨ã‚ˆãèª¬æ˜ã•ã‚Œã¾ã™ã€‚

- æ•´åˆæ€§ã®ç¢ºä¿ãŒå¿…è¦ãªå¢ƒç•Œã§ã‚ã‚‹ã€‚
- é›†ç´„å†…éƒ¨ã®å¤‰æ›´ã¯å¿…ãšé›†ç´„ãƒ«ãƒ¼ãƒˆã‚’çµŒç”±ã™ã‚‹ã“ã¨ã§é›†ç´„å†…ã‚’å¸¸ã«æ•´åˆæ€§ãŒç¢ºä¿ã•ã‚ŒãŸçŠ¶æ…‹ã«ã™ã‚‹ã€‚
- é›†ç´„ãƒ«ãƒ¼ãƒˆã®å˜ä½ã§ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãƒ»æ°¸ç¶šåŒ–ã‚’è¡Œã†ã€‚

![](https://cz-cdn.shoeisha.jp/static/images/article/10776/10776_001.png)

```ts
class Order{
  orderId: OrderId
  chain: Chain,
  amount: Amount
  user: User

  constructor(
    orderId: OrderId,
    chain: Chain,
    amount: Amount,
    user: User
  ){
    this.orderId = orderId
    this.chain = chain
    this.amount = amount
    this.user = user
  }
}
```

## ãƒªãƒã‚¸ãƒˆãƒªã®ä¾‹
ãƒªãƒã‚¸ãƒˆãƒªã¯é›†ç´„ã®å˜ä½ã§æ°¸ç¶šåŒ–ã‚’è¡Œã„ã¾ã™ã€‚é›†ç´„ã‚’upsertã«ã‚ˆã£ã¦ä¿å­˜ã™ã‚‹saveãƒ¡ã‚½ãƒƒãƒ‰ã¨ã€æ°¸ç¶šåŒ–å…ˆã‹ã‚‰é›†ç´„ã‚’ç”Ÿæˆã™ã‚‹getXXbyYYãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¡ã¾ã™
ãƒªãƒã‚¸ãƒˆãƒªã¯å¤–éƒ¨ã®DBå›ºæœ‰ã®å‡¦ç†ã‚’å«ã‚€ãŸã‚ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é€šã—ã¦DIã‚’ã—ã¾ã™ã€‚
Prismaã‚„Spreadsheetã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãªã©ã€DBå›ºæœ‰ã®å€¤ã¯ãƒªãƒã‚¸ãƒˆãƒªã®ä¸­ã«éš è”½ã—ã€ãƒªãƒã‚¸ãƒˆãƒªã®å¤–éƒ¨ã¨ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã‚’ç”¨ã„ã¦ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã„ã¾ã™ã€‚

```ts
interface IOrderRepository{
  save(order:Order):Promise<void>
  getOrderByOrderId(orderId:OrderId):Promise<Order | null>
}
```

```ts
class OrderRdbRepository implements IOrderRepository{
  async save(order:Order):Promise<void>{
    await prisma.user.upsert({
      where: {
        id: order.user.id().get()
      },
      create: {
        id: order.user.id().get(),
        name: order.user.name().get(),
        email: order.user.email().get(),
        phone_number: order.user.phoneNumber().get(),
      },
      update: {
        name: order.user.name().get(),
        email: order.user.email().get(),
        phone_number: order.user.phoneNumber().get(),
      }
    })

    await getOrderByOrderId(orderId:OrderId):Promise<Order | null>{
      const data = await prisma.orders.findUnique({
        where: {
          id: order.user.id().get()
        },
        include: {
          users: true
        }
      })

      if(data === null){
        return null
      }

      const user = User.initByDb(
        new UserId(data.users.id),
        new UserName(data.users.name),
        new Email(data.users.email),
        new PhoneNumber(data.users.phone_number)
      )
      const order = new Order(
        new OrderId(data.id),
        new Chain(data.chain),
        new Amount(data.amount),
        user
      )
      return order
    }
  }
}
```

## ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾‹
ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã¯1ã¤ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæŒã¤ã‚‚ã®ã§ã¯ãªã„ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ‰±ã„ã¾ã™ã€‚ä¾‹ãˆã°è¤‡æ•°ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’æ¯”è¼ƒã™ã‚‹å‡¦ç†ã‚„ã€DBã¸ã®å•ã„åˆã‚ã›ã‚’ä¼´ã†ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å­˜åœ¨ç¢ºèªãªã©ã§ã™ã€‚

```ts
class OrderService{
  repository: IOrderRepository

  constructor(repository:IOrderRepository){
    this.repository = repository
  }

  async isExists(order:Order)Promise<boolean>{
    const orderId = order.id()
    const orderFromDb = await this.repository.getOrderByOrderId(orderId)
    return orderFromDb !== null
  }
}
```

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ä¾‹
ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯1ã¤ã®æ¥­å‹™ãƒ•ãƒ­ãƒ¼ã‚’è¡¨ç¾ã—ã¾ã™ã€‚
ãã‚‚ãã‚‚æ¥­å‹™ãƒ•ãƒ­ãƒ¼ã¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿæ¥­å‹™ãƒ•ãƒ­ãƒ¼ã¨ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç©ã¿é‡ã­ãŸã‚‚ã®ã§ã™ã€‚ã¤ã¾ã‚Šæ¥­å‹™ãƒ•ãƒ­ãƒ¼ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸¦ã¹ã‚‹ã“ã¨ã§è¡¨ç¾ã§ãã¾ã™ã€‚
ãã—ã¦ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯Webã‚„CLIã¨ã„ã£ãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹ã®ã§ã€ãã®å¤–éƒ¨ã¨ã¯ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã„ã¾ã™ã€‚

```ts
class OrderUsecase{
  private repository:IOrderRepository

  constructor(repository:IOrderRepository){
    this.repository = repository
  }

  async store(
    name:string,
    email:string,
    phoneNumber:string,
    chain:string,
    amount:Number
  ):Promise<void>{
    const user = User.init(
      new UserName(name),
      new Email(email),
      new PhoneNumber(phoneNumber),
    )
    const order = new Order(
      new Chain(chain),
      new Amount(amount),
      user
    )
    await this.repository.save(order)
  }

  async changePhoneNumber(
    inputOrderId:number,
    inputPhoneNumber:string
  )Promise<void>{
    const orderId = new OrderId(inputOrderId)
    const order = await this.repository.getOrderByOrderId(orderId)
    const phoneNumber = new PhoneNumber(inputPhoneNumber)
    order.user.phoneNumber = phoneNumber
    await this.repository.save(order)
  }
}
```

## ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è²¬å‹™
Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è²¬å‹™ã¨ã¯ã€Webã¨ã„ã†ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«é–¢ã™ã‚‹éƒ¨åˆ†ã‚’æ‰±ã†ã¨ã“ã‚ã§ã™ã€‚
ã¤ã¾ã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‚’æ“ä½œã—ã€ã‚¯ãƒƒã‚­ãƒ¼ã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ‰±ã„ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å‹•ã‹ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ä½œã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã€ã¨ã„ã†ã®ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒè¡Œã†ã“ã¨ã§ã™ã€‚ãã®ä¸­ã§ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

```ts
class OrderController{
  async store(req:Request, res:Response){
    {
      name,
      email,
      phoneNumber,
      chain,
      amount
    } = req.body

    try{
      const repository = new OrderRdbRepository
      // ãƒªãƒã‚¸ãƒˆãƒªã®å®Ÿè£…ã‚’ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«DIã—ã¦ã„ã‚‹
      // DIã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã†å ´åˆã‚‚ã‚ã‚‹
      const usecase = new OrderUsecase(repository)
      await usecase.store(
        name,
        email,
        phoneNumber,
        chain,
        amount
      )
      res.sendStatus(200)
    }catch(e:any){
      res.status(400).send(e.message)
    }
  }
}
```

## å…¨ä½“åƒ
ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã«ãŠã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ãŒã©ã“ã‹ã‚‰ã‚„ã£ã¦ãã¦ã©ã“ã«ä¿å­˜ã•ã‚Œã‚‹ã®ã‹ã¯é–¢å¿ƒäº‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ãŒãƒ‡ãƒ¼ã‚¿ã‚’ã©ã®ã‚ˆã†ãªå½¢ã§æŒã¡ã€ã©ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦å¤‰å½¢ã•ã›ã€å€¤ãŒã©ã†ã„ã†æ„å‘³ã‚’æŒã¤ã®ã‹ã¨ã„ã†ã“ã¨ã‚’ã€å¤–éƒ¨ã®IOã¨åˆ‡ã‚Šé›¢ã—ãŸçŠ¶æ…‹ã§ã€
ã‹ã¤ä¸€æ–¹å‘ã®ä¾å­˜é–¢ä¿‚ã¨ç²’åº¦ã§åˆ†ã‘ãŸã‚¯ãƒ©ã‚¹ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®è‡ªå·±ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¨å…±é€šåŒ–ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
